{% extends 'towit/tracker/tracker.html' %}

{% load tz %}

{% block map_scripts %}  
	 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
   
	 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
	 
	 <style>
	   #map { height: 450px; }
	 </style>
{% endblock %} 
    
{% block map %}

    <div id ="map"></div>
    Last update: <b>{{ data.timestamp|localtime }}</b>
   
    <script>
         // Creating map options
         var mapOptions = {
         center: [{{ data.latitude }}, {{ data.longitude }}],
         zoom: 12
         }
         
         // Creating a map object
         var map = new L.map("map", mapOptions);
         
         // Creating a Layer object
         var layer = new  L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
         
         // Adding layer to the map
         map.addLayer(layer);
         
         var marker = L.marker([{{ data.latitude }}, {{ data.longitude }}]).addTo(map);
     </script>
{% endblock %} 
	